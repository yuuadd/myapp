<!DOCTYPE html>
<html lang="ja">
<head>
{% load static %}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>å®¤è˜­ é£Ÿã¹ãƒ­ã‚° - ãƒ›ãƒ¼ãƒ </title>

<style>
body {
    margin: 0;
    background: #fafafa;
    font-family: "Hiragino Kaku Gothic ProN","ãƒ¡ã‚¤ãƒªã‚ª",sans-serif;
}

/* ==== ãƒ˜ãƒƒãƒ€ãƒ¼ ==== */
.header {
    width: 100%;
    padding: 15px;
    background: white;
    border-bottom: 1px solid #ddd;
    text-align: center;
    font-size: 28px;
    font-weight: 900;
    position: sticky;
    top: 0;
    z-index: 10;
}

/* ==== æ¤œç´¢ãƒãƒ¼ ==== */
.search-area {
    width: 90%;
    max-width: 600px;
    margin: 20px auto;
    background: white;
    padding: 12px 16px;
    display: flex;
    border-radius: 40px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
}
.search-input {
    flex: 1;
    font-size: 18px;
    border: none;
    outline: none;
}
.search-btn {
    font-size: 22px;
    border: none;
    background: none;
}
.search-btn:active {
    transform: scale(0.9);
}

/* ==== ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ ==== */
.slider-container {
    position: relative;
    width: 100%;
    max-width: 800px;
    height: 60vh;
    margin: 30px auto 100px auto;
    overflow: hidden;
    border-radius: 18px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.25);
    background: #000;
}

/* åŸºæœ¬ */
.slider-img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: transform .45s ease, opacity .45s ease;
}

/* è¡¨ç¤ºä¸­ */
.slider-img.active {
    opacity: 1;
    transform: translateX(0);
}

/* æ¬¡ã¸ï¼šå³ã‹ã‚‰å…¥ã‚‹å¾…æ©Ÿä½ç½® */
.slider-img.from-right {
    transform: translateX(100%);
}

/* å‰ã¸ï¼šå·¦ã‹ã‚‰å…¥ã‚‹å¾…æ©Ÿä½ç½® */
.slider-img.from-left {
    transform: translateX(-100%);
}

/* å·¦ã¸æ¶ˆãˆã‚‹ï¼ˆæ¬¡ã¸é€²ã‚€ã¨ãã®ç¾åœ¨ç”»åƒï¼‰ */
.slider-img.exit-left {
    transform: translateX(-100%);
    opacity: 0;
}

/* å³ã¸æ¶ˆãˆã‚‹ï¼ˆå‰ã¸æˆ»ã‚‹ã¨ãã®ç¾åœ¨ç”»åƒï¼‰ */
.slider-img.exit-right {
    transform: translateX(100%);
    opacity: 0;
}

/* çŸ¢å° */
.slider-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 40px;
    color: white;
    padding: 10px 15px;
    border-radius: 50%;
    background: rgba(0,0,0,0.35);
    cursor: pointer;
    user-select: none;
}
.slider-btn.left { left: 10px; }
.slider-btn.right { right: 10px; }

/* ==== ãƒ•ãƒƒã‚¿ãƒ¼ ==== */
.footer {
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 65px;
    background: white;
    border-top: 1px solid #ddd;
    display: flex;
    justify-content: space-around;
    align-items: center;
}

.footer a {
    text-decoration: none;
    color: #444;
}

.footer-posts {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 24px;
}

.footer-posts span {
    font-size: 10px;
}
</style>
</head>

<body>

<div class="header">å®¤è˜­ é£Ÿã¹ãƒ­ã‚°</div>

<!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
<form action="{% url 'mychat:search' %}" method="get">
    <div class="search-area">
        <input type="text" name="search" class="search-input" placeholder="åº—åãƒ»æ–™ç†åã§æ¤œç´¢">
        <button class="search-btn">ğŸ”</button>
    </div>
</form>

<!-- ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ -->
<div class="slider-container" id="slider">
    <div class="slider-btn left" id="btnPrev">â€¹</div>
    <div class="slider-btn right" id="btnNext">â€º</div>
</div>

<!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
<div class="footer">
    <a href="{% url 'mychat:main' %}">ğŸ </a>
    <a href="{% url 'mychat:search' %}">ğŸ”</a>
    <a href="{% url 'mychat:write' %}">â•</a>
    <a href="{% url 'mychat:list' %}" class="footer-posts">
        ğŸ“<span>ã‚ãªãŸã®æŠ•ç¨¿</span>
    </a>
</div>

<script>
/* === ç”»åƒãƒªã‚¹ãƒˆ === */
const imageUrls = [
    "{% static 'mychat/33658040_s.jpg' %}",
    "{% static 'mychat/food2.jpg' %}",
    "{% static 'mychat/food2.jpg' %}",
    "{% static 'mychat/hannba-gu.jpg' %}",
    "{% static 'mychat/33387965_s.jpg' %}",
    "{% static 'mychat/33465212_s.jpg' %}"
];

/* === ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼åˆæœŸåŒ– === */
const slider = document.getElementById('slider');
const btnPrev = document.getElementById('btnPrev');
const btnNext = document.getElementById('btnNext');

let currentIndex = 0;
const slides = [];

/* ç”»åƒç”Ÿæˆï¼ˆæœ€åˆã¯ activeï¼‰ */
imageUrls.forEach((src, i) => {
    const img = document.createElement('img');
    img.src = src;
    img.className = 'slider-img';
    if (i === 0) img.classList.add('active');
    slider.appendChild(img);
    slides.push(img);
});

/* æ–¹å‘ä»˜ãã§è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ */
function showSlide(nextIndex, direction) {
    if (nextIndex === currentIndex) return;

    const current = slides[currentIndex];
    const next = slides[nextIndex];

    // æ¬¡ã®ç”»åƒã®åˆæœŸä½ç½®ï¼ˆå…¥ã£ã¦ãã‚‹æ–¹å‘ï¼‰
    next.classList.remove('from-left', 'from-right', 'exit-left', 'exit-right', 'active');
    if (direction === 'right') {
        next.classList.add('from-right');
    } else {
        next.classList.add('from-left');
    }

    // å¼·åˆ¶å†æç”»ï¼ˆã‚¢ãƒ‹ãƒ¡ç¢ºå®Ÿã«ã™ã‚‹ï¼‰
    next.offsetHeight;

    // ç¾åœ¨ç”»åƒã‚’æŠ¼ã—å‡ºã™ï¼ˆå‡ºã¦ã„ãæ–¹å‘ï¼‰
    current.classList.remove('exit-left', 'exit-right');
    if (direction === 'right') {
        current.classList.add('exit-left');
    } else {
        current.classList.add('exit-right');
    }
    current.classList.remove('active');

    // æ¬¡ç”»åƒã‚’è¡¨ç¤º
    next.classList.add('active');
    next.classList.remove('from-left', 'from-right');

    currentIndex = nextIndex;
}

/* æ¬¡ã¸ï¼ˆå³ã‹ã‚‰å…¥ã‚‹ï¼‰ */
function nextSlide() {
    const next = (currentIndex + 1) % slides.length;
    showSlide(next, 'right');
}

/* å‰ã¸ï¼ˆå·¦ã‹ã‚‰å…¥ã‚‹ï¼‰ */
function prevSlide() {
    const next = (currentIndex - 1 + slides.length) % slides.length;
    showSlide(next, 'left');
}

/* ãƒœã‚¿ãƒ³æ“ä½œï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚¯ãƒªãƒƒã‚¯ã¨å¹²æ¸‰ã•ã›ãªã„ï¼‰ */
btnNext.addEventListener('click', (e) => { e.stopPropagation(); nextSlide(); });
btnPrev.addEventListener('click', (e) => { e.stopPropagation(); prevSlide(); });

/* ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œï¼ˆã‚¹ãƒãƒ›ï¼‰ */
let startX = 0;
slider.addEventListener('touchstart', e => {
    startX = e.touches[0].clientX;
});
slider.addEventListener('touchend', e => {
    const endX = e.changedTouches[0].clientX;
    const diff = startX - endX;
    if (diff > 50) nextSlide();       // å·¦ã‚¹ãƒ¯ã‚¤ãƒ— â†’ æ¬¡ï¼ˆå³ã‹ã‚‰å…¥ã‚‹ï¼‰
    else if (diff < -50) prevSlide(); // å³ã‚¹ãƒ¯ã‚¤ãƒ— â†’ å‰ï¼ˆå·¦ã‹ã‚‰å…¥ã‚‹ï¼‰
});

/* ã‚¯ãƒªãƒƒã‚¯ã§ã‚¹ãƒ©ã‚¤ãƒ‰ï¼ˆå·¦å³åŠåˆ†ã§æ–¹å‘ã‚‚å¤‰ãˆã‚‹ï¼‰ */
slider.addEventListener('click', (e) => {
    if (e.target.classList.contains('slider-btn')) return;

    const rect = slider.getBoundingClientRect();
    const x = e.clientX - rect.left;

    if (x < rect.width / 2) {
        prevSlide(); // å·¦åŠåˆ†ã‚¯ãƒªãƒƒã‚¯ â†’ å·¦ã‹ã‚‰å…¥ã‚‹
    } else {
        nextSlide(); // å³åŠåˆ†ã‚¯ãƒªãƒƒã‚¯ â†’ å³ã‹ã‚‰å…¥ã‚‹
    }
});
</script>

</body>
</html>

